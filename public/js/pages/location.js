var KTLocation=function(){var t=function(t){$(t).find("option").remove().end().append('<option selected="selected" value="" >---Chọn phường/xã---</option>').val()},e=function(t,e,a){void 0!==t&&$.ajax(base_url_admin+"/district/load/"+t,{method:"GET",dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(t){if(t.success){var n="<option></option>";$(e).append($(n).attr("value",0).text("---Chọn quận/huyện---")),$.each(t.data,function(t,d){var s=a==d.district_id;$(e).append($(n).attr("value",d.district_id).attr(s?"selected":"data-id",s?"selected":d.district_id).text(d.name))})}}})},a=function(t,e,a){void 0!==t&&$.ajax(base_url_admin+"/ward/load/"+t,{method:"GET",dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(t){if(t.success){var n="<option></option>";$(e).append($(n).attr("value",0).text("---Chọn phường/xã---")),$.each(t.data,function(t,d){var s=a==d.ward_id;$(e).append($(n).attr("value",d.ward_id).attr(s?"selected":"data-id",s?"selected":d.ward_id).text(d.name))})}}})},n=function(a,n,d){var s=$(a).attr("selected-id"),c=$(n).attr("selected-id");0!=s&&e(s,n,c),$(a).change(function(){!function(t){$(t).find("option").remove().end().append('<option selected="selected" value="" >---Chọn quận/huyện---</option>').val()}(n),t(d);var s=$(a+" option:selected").val();e(s,n,0)})},d=function(t,e){$(t).submit(function(){return KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),$.ajax(e,{method:"POST",data:new FormData(this),dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(t){if($(".text-error").text(" "),t.success)toastr.success(t.toastr),location.reload();else{for(var e in toastr.error(t.toastr),t.errors)$("."+e+"-error").text(t.errors[e][0]);KTApp.unblock("body")}}}).always(function(){}),!1})};return{init:function(){$(".district_search").selectpicker(),$("#seState").select2({placeholder:"---Chọn tỉnh/thành phố---",width:"100%"}),$("#seDistrict").select2({placeholder:"---Chọn quận/huyện---",width:"100%"}),$("#seWard").select2({placeholder:"---Chọn phường/xã---",width:"100%"}),function(t){var e=$(t).attr("selected-id");$.ajax(base_url_admin+"/state/load",{method:"GET",dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(a){if(a.success){var n="<option></option>";$(t).append($(n).attr("value",0).text("---Chọn tỉnh/thành phố---")),$.each(a.data,function(a,d){var s=e==d.state_id;$(t).append($(n).attr("value",d.state_id).attr(s?"selected":"data-id",s?"selected":d.state_id).text(d.name))})}}})}("#seState"),n("#seState","#seDistrict","#seWard"),function(e,n){var d=$(e).attr("selected-id"),s=$(n).attr("selected-id");0!=d&&a(d,n,s),$(e).change(function(){t(n);var d=$(e+" option:selected").val();a(d,n,0)})}("#seDistrict","#seWard"),d("#frmAddState",base_url_admin+"/state/add"),d("#frmAddDistrict",base_url_admin+"/district/add"),d("#frmAddWard",base_url_admin+"/ward/add")}}}();KTUtil.ready(function(){KTLocation.init()});