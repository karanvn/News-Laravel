var KTAPIOrder=function(){var t=function(t,e){KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()});var a=$(".area-"+t).val();$.ajax(e,{method:"POST",data:{params:a,_token:$('input[name="_token"]').val()},success:function(e){KTApp.unblock("body");var a=".response-"+t;$(a).empty(),$(a).jsonViewer(e)}})},e=function(t){$(t).select2({placeholder:"---Chọn sản phẩm---",selectionTitleAttribute:!1,ajax:{url:base_url_admin+"/order/add_product",global:!1,type:"GET",data:function(t){return{term:$.trim(t.term),page:t.page||1}},processResults:function(t){return{results:$.map(t.results,function(t){return{text:t.text,id:t.id,html:t.html}})}}},allowClear:!0,templateResult:function(t){if(void 0!==t.text)return $(t.text)},templateSelection:function(t){return t.id?$(t.text):t.text}}).on("select2:selecting",function(t){data=t.params.args.data;var e=data.id;e=""!=e?e:0,url="/api/product/"+e})};return{init:function(){var a,r;$("#api_scroll_box").change(function(){var t=$(this).val();$("html,body").animate({scrollTop:$("#"+t).offset().top-140},"slow")}),function(t){var e=".params-"+t,a=".area-"+t,r=$(e).attr("rel"),n=JSON.parse(r);$(e).jsonViewer(n);var l=JSON.stringify(n,void 0,4);$(a).html(l)}("add-order"),a="add-order",r=base_url_admin+"/third/add_order",$(".btn-"+a).click(function(){if("update-shipping"==a){r=base_url_admin+"/third/update_shipping";var e=$('input[name="shipping_id"]:checked').val();void 0===e&&(e=-9999),r=r+"/"+e}t(a,r)}),$("#add_order_selected_customer").select2({placeholder:"---Chọn khách hàng---",selectionTitleAttribute:!1,allowClear:!0,ajax:{url:base_url_admin+"/order/add_customer?exp=true",global:!1,type:"GET",data:function(t){return{term:$.trim(t.term),page:t.page||1}},processResults:function(t){return{results:$.map(t.results,function(t){return{text:t.text,id:t.id,html:t.html}})}},cache:!0},allowClear:!0,templateResult:function(t){if(void 0!==t.text)return $(t.text)},templateSelection:function(t){return t.id?$(t.text):t.text}}).on("select2:selecting",function(t){KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),data=t.params.args.data,user_id=data.id,$(".selected_customer").html(data.html),KTApp.unblock("body")}),e("#selected_product")}}}();KTUtil.ready(function(){KTAPIOrder.init()});