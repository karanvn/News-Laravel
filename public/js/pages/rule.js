var KTRule=function(){var e=function(e,r){$(e).submit(function(){return KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),$.ajax(r,{method:"POST",data:new FormData(this),dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(e){if($(".text-error").text(" "),e.success)toastr.success(e.toastr),KTApp.unblock("body"),location.reload();else{for(var r in toastr.error(e.toastr),e.errors)$("."+r+"-error").text(e.errors[r][0]);KTApp.unblock("body")}}}),!1})};return{init:function(){$("#op_permissions").select2({placeholder:"---Chọn các quyền---",allowClear:!0,ajax:{url:base_url_admin+"/role/add_permission",global:!1,type:"GET",data:function(e){return{term:$.trim(e.term),page:e.page||1}},processResults:function(e){if(e.success)return{results:$.map(e.results,function(e){return{text:e.name,id:e.id}})}},cache:!0}}),e("#frmAddPermission",base_url_admin+"/permission/add"),e("#frmAddRole",base_url_admin+"/role/add"),e("#frmAddRule",base_url_admin+"/rule/add")}}}();KTUtil.ready(function(){KTRule.init()});