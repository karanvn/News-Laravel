var KTAPIUser=function(){var e=function(e){var t=".params-"+e,a=".area-"+e,s=$(t).attr("rel"),i=JSON.parse(s);$(t).jsonViewer(i);var r=JSON.stringify(i,void 0,4);$(a).html(r)},t=function(e,t){$(".btn-"+e).click(function(){if("update-shipping"==e){t=base_url_admin+"/third/update_shipping";var s=$('input[name="shipping_id"]:checked').val();void 0===s&&(s=-9999),t=t+"/"+s}a(e,t)})},a=function(e,t){KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()});var a=$(".area-"+e).val();$.ajax(t,{method:"POST",data:{params:a,_token:$('input[name="_token"]').val()},success:function(t){KTApp.unblock("body");var a=".response-"+e;$(a).empty(),$(a).jsonViewer(t)}})},s=function(e,t){$(e).select2({placeholder:"---Chọn khách hàng---",selectionTitleAttribute:!1,allowClear:!0,ajax:{url:base_url_admin+"/order/add_customer?exp=true",global:!1,type:"GET",data:function(e){return{term:$.trim(e.term),page:e.page||1}},processResults:function(e){return{results:$.map(e.results,function(e){return{text:e.text,id:e.id,html:e.html}})}},cache:!0},allowClear:!0,templateResult:function(e){if(void 0!==e.text)return $(e.text)},templateSelection:function(e){return e.id?$(e.text):e.text}}).on("select2:selecting",function(e){if(KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),data=e.params.args.data,user_id=data.id,"user"==t)r=".json_response_user",n="/api/user/"+user_id,$.ajax(n,{method:"GET",success:function(e){$(r).jsonViewer(e)}});else if("update_user"==t)a("update-user",base_url_admin+"/third/update_user/"+user_id);else if("update_shipping"==t){var s=JSON.parse($(".area-update-shipping").val());s.user_id=user_id;var i=JSON.stringify(s,void 0,4);$(".area-update-shipping").html(i),$(".selected_customer").html(data.html)}var r,n;KTApp.unblock("body")})};return{init:function(){$("#api_scroll_box").change(function(){var e=$(this).val();$("html,body").animate({scrollTop:$("#"+e).offset().top-140},"slow")}),e("add-user"),e("update-user"),e("add-shipping"),e("update-shipping"),t("add-user",base_url_admin+"/third/add_user"),t("add-shipping",base_url_admin+"/third/add_shipping"),t("update-shipping",base_url_admin+"/third/update_shipping"),s("#user_selected_customer","user"),s("#shipping_selected_customer","shipping"),s("#update_shipping_selected_customer","update_shipping"),s("#update_user_selected_customer","update_user"),$(".btn-get-params-shipping").click(function(){var e=JSON.parse($(".area-add-shipping").val()),t=$("#shipping_selected_customer").val(),a=$("#seState").val(),s=$("#seDistrict").val(),i=$("#seWard").val();""!=t&&null!=t&&(e.user_id=t),""!=a&&null!=a&&0!=a&&(e.state_id=a),""!=s&&null!=s&&(e.district_id=s),""!=i&&null!=i&&(e.ward_id=i);var r=JSON.stringify(e,void 0,4);$(".area-add-shipping").html(r)})}}}();KTUtil.ready(function(){KTAPIUser.init()});