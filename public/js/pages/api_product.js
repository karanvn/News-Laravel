var KTAPIProduct=function(){var e=function(e,t){$.ajax(t,{method:"GET",success:function(t){$(e).jsonViewer(t)}})},t=function(t,r){$(t).click(function(){if(KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),"products"==r){url="/api/products";var t=$('input[name="parent_id"]:checked').val(),o=$(".product_page").val();url=url+"?page="+o+"&category_ids="+t;var a=$(".product_name").val();""!=a&&(url=url+"&name="+a),url+="&limit=1";var s=".response-products";$(s).empty(),console.log("URL",url)}else if("product"==r){var c=$(".product_id").val();c=""!=c?c:0,url="/api/product/"+c;s=".response-product";$(s).empty()}else if("categories"==r){var n=$('input[name="parent_id"]:checked').val();url="/api/categories?category_id="+n;s=".response-categories";$(s).empty()}e(s,url),KTApp.unblock("body")})};return{init:function(){$("#api_scroll_box").change(function(){var e=$(this).val();$("html,body").animate({scrollTop:$("#"+e).offset().top-140},"slow")}),e(".response-products","/api/products?page=1&limit=1"),e(".response-product","/api/product/0"),t(".btn-filter-products","products"),t(".btn-filter-categories","categories"),$("#selected_product").select2({placeholder:"---Chọn sản phẩm---",selectionTitleAttribute:!1,ajax:{url:base_url_admin+"/order/add_product",global:!1,type:"GET",data:function(e){return{term:$.trim(e.term),page:e.page||1}},processResults:function(e){return{results:$.map(e.results,function(e){return{text:e.text,id:e.id,html:e.html}})}}},allowClear:!0,templateResult:function(e){if(void 0!==e.text)return $(e.text)},templateSelection:function(e){return e.id?$(e.text):e.text}}).on("select2:selecting",function(t){data=t.params.args.data;var r=data.id;r=""!=r?r:0,url="/api/product/"+r,$(".response-product").empty(),e(".response-product",url)}),e(".response-categories","/api/categories")}}}();function show_trees(e,t=0){var r=$(".jstree-icon-"+e).attr("expanded"),o="open";"open"==r&&(o="closed",$(".jstree-children-"+e).empty()),$(".jstree-node-"+e).removeClass("jstree-"+r).addClass("jstree-"+o),$(".jstree-icon-"+e).attr("expanded",o),"closed"==r&&(KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),$.ajax(base_url_admin+"/category/tree/"+e+"?flag="+t,{method:"GET",success:function(t){KTApp.unblock("body"),t.success&&$(".jstree-children-"+e).html(t.html)}}).always(function(){}))}KTUtil.ready(function(){KTAPIProduct.init()});