var KTLocation=function(){var t=function(t){$(t).select2({placeholder:"---Chọn tỉnh/thành phố---",width:"100%"})},e=function(t){$(t).select2({placeholder:"---Chọn quận/huyện---",width:"100%"})},a=function(t){$(t).select2({placeholder:"---Chọn phường/xã---",width:"100%"})},n=function(t){$(t).selectpicker()},s=function(t){$(t).find("option").remove().end().append('<option selected="selected" value="" >---Chọn phường/xã---</option>').val()},i=function(t){var e=$(t).attr("selected-id");$.ajax(base_url_admin+"/state/load",{method:"GET",dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(a){if(a.success){var n="<option></option>";$(t).append($(n).attr("value",0).text("---Chọn tỉnh/thành phố---")),$.each(a.data,function(a,s){var i=e==s.state_id;$(t).append($(n).attr("value",s.state_id).attr(i?"selected":"data-id",i?"selected":s.state_id).text(s.name))})}}})},d=function(t,e,a){void 0!==t&&$.ajax(base_url_admin+"/district/load/"+t,{method:"GET",dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(t){if(t.success){var n="<option></option>";$(e).append($(n).attr("value",0).text("---Chọn quận/huyện---")),$.each(t.data,function(t,s){var i=a==s.district_id;$(e).append($(n).attr("value",s.district_id).attr(i?"selected":"data-id",i?"selected":s.district_id).text(s.name))})}}})},c=function(t,e,a){void 0!==t&&$.ajax(base_url_admin+"/ward/load/"+t,{method:"GET",dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(t){if(t.success){var n="<option></option>";$(e).append($(n).attr("value",0).text("---Chọn phường/xã---")),$.each(t.data,function(t,s){var i=a==s.ward_id;$(e).append($(n).attr("value",s.ward_id).attr(i?"selected":"data-id",i?"selected":s.ward_id).text(s.name))})}}})},r=function(t,e,a){var n=$(t).attr("selected-id"),i=$(e).attr("selected-id");0!=n&&d(n,e,i),$(t).change(function(){!function(t){$(t).find("option").remove().end().append('<option selected="selected" value="" >---Chọn quận/huyện---</option>').val()}(e),s(a);var n=$(t+" option:selected").val();d(n,e,0)})},o=function(t,e){var a=$(t).attr("selected-id"),n=$(e).attr("selected-id");0!=a&&c(a,e,n),$(t).change(function(){s(e);var a=$(t+" option:selected").val();c(a,e,0)})},u=function(t,e){$(t).submit(function(){return KTApp.block("body",{overlayColor:"#000000",state:"success",message:$("#message_loading").val()}),$.ajax(e,{method:"POST",data:new FormData(this),dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(t){if($(".text-error").text(" "),t.success)toastr.success(t.toastr),location.reload();else{for(var e in toastr.error(t.toastr),t.errors)$("."+e+"-error").text(t.errors[e][0]);KTApp.unblock("body")}}}).always(function(){}),!1})};return{init:function(){n(".district_search"),t(".seState"),e(".seDistrict"),a(".seWard"),i(".seState"),r(".seState",".seDistrict",".seWard"),o(".seDistrict",".seWard"),n("#district_search"),t("#seState"),e("#seDistrict"),a("#seWard"),i("#seState"),r("#seState","#seDistrict","#seWard"),o("#seDistrict","#seWard"),u("#frmAddState",base_url_admin+"/state/add"),u("#frmAddDistrict",base_url_admin+"/district/add"),u("#frmAddWard",base_url_admin+"/ward/add")}}}();KTUtil.ready(function(){KTLocation.init()});