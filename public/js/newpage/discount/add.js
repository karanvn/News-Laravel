function addproduct(t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:base_url_admin+"/discount/checkproductindiscount",dataType:"text",data:{id:t},success:function(a){0!=a?$("#loidatontai").html(a):-1==$("#productinput").val().indexOf(t)&&($("#showajaxproductcheck").append('<span class="item_'+t+' bg-light mb-1 mr-1 px-1 py-1 rounded">'+$("#name"+t).text()+'<i class="fas fa-times ml-2" onclick="deleteproduct('+t+')"></i></span>'),$("#productinput").val($("#productinput").val()+t+","),$("#showajaxproduct").html(""),$("#ajaxproduct").val(""))}}),$("#errorsp").html("")}function addProductCombo(t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:base_url_admin+"/discount/checkproductindiscount",dataType:"text",data:{id:t},success:function(a){-1==$("#productCombo").val().indexOf(t)&&($("#result").append('<span class="item_'+t+' mb-1 mr-1 px-1 py-1 alert alert-success">'+$("#name"+t).text()+'<i class="fas fa-times ml-2" style="color: white; font-size: 12px" onclick="deleteProductCombo('+t+')"></i></span>'),$("#productCombo").val($("#productCombo").val()+t+","))}})}function deleteproduct(t){var a=$("#productinput").val();$("#productinput").val(a.replace(t+",","")),$("#P .item_"+t).remove()}$("#ajaxproduct").on("input",function(){$("#loidatontai").html(""),$("#errorsp").html(""),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"GET",url:base_url_admin+"/discount/searchproductindiscount",dataType:"text",data:{name:$("#ajaxproduct").val()},success:function(t){$("#showajaxproduct").html(t)}})}),$("#type").on("input",function(){var t=$("#type").val();$(".itemtype").hide(),$("#"+t).show()});var random=function(){$("#name").val(Math.random().toString(36).substring(2))};function save(){var t=0;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:base_url_admin+"/discount/checkadddisscount",dataType:"JSON",data:{name:$("#name").val()},success:function(a){0==a&&""!=$("#name").val()||""!=$("#id").val()?($("#errorsname").html(""),"P"==$("#type").val()&&""==$("#productinput").val()&&($("#errorsp").html("Không được trống"),t+=1),"CO"==$("#type").val()&&""==$("#productCombo").val()&&($("#error_product").html("Không được trống"),t+=1),"G"==$("#type").val()&&""==$("#menuinput").val()&&($("#errorsg").html("Không được trống"),t+=1),0==t&&$("#okadd").click()):($("#errorsname").html("Mã không hợp lệ"),t+=1)}})}function deleteProductCombo(t){var a=$("#productCombo").val();$("#productCombo").val(a.replace(t+",","")),$("#CO .item_"+t).remove()}"P"!=$("#input").val()&&($(".itemtype").hide(),$("#"+$("#type").val()).show()),$("#key").keyup(function(){var t=$(this).val(),a=$('input[name="_token"]').val();$.ajax({url:base_url_admin+"/discount/discount_combo",type:"GET",data:{query:t,_token:a},success:function(t){$("#search-ajax").fadeIn(),$("#search-ajax").html(t)}})});